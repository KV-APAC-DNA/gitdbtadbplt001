version: 2

sources:
  - name: phlsdl_raw
    database: "{{ env_var('DBT_ENV_LOAD_DB') }}"
    schema: phlsdl_raw
    quoting:
      database: false
      schema: false
      identifier: false
    tables:
    - name: sdl_ph_clobotics_task_raw_data
      tags: ["ph_perfectstore_clobotics","ingestion"]
      tests:
          - test_null__ff:
              not_null_columns: ["plan_status","plan_finish_time","username","display_username","store_code","store_name","task_name","create_time","kpi","manufacturer","value"]
              name: TRATBL_sdl_ph_clobotics_task_raw_data__null_test
              config:
                store_failures: true
                schema: phlwks_integration
    - name: sdl_ph_clobotics_store_raw_data
      tags: ["ph_perfectstore_clobotics","ingestion"]
      tests:
          - test_null__ff:
              not_null_columns: ["plan_status","plan_finish_time","username","display_username","store_code","plan_start_time","plan_upload_time","sku_id","manufacturer","kpi","value"]
              name: TRATBL_sdl_ph_clobotics_store_raw_data__null_test
              config:
                store_failures: true
                schema: phlwks_integration
    - name: sdl_ph_clobotics_survey_data
      tags: ["ph_perfectstore_clobotics","ingestion"]
      tests:
          - test_null__ff:
              not_null_columns: ["plan_status","plan_finish_time","username","store_code","task_name","create_time","qn_name","question_content","question_answer_code","question_answer_value"]
              name: TRATBL_sdl_ph_clobotics_survey_data__null_test
              config:
                store_failures: true
                schema: phlwks_integration


  - name: phlitg_integration
    database: "{{ env_var('DBT_ENV_CORE_DB') }}"
    schema: phlitg_integration
    quoting:
      database: false
      schema: false
      identifier: false
    tables:
    - name: itg_ph_clobotics_store_mapping
      tags: ["ph_perfectstore_clobotics",""]